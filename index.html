<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NanoThumbnail - SaaS Generator</title>
    <link rel="icon" href="data:,">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
    <!-- Icons (FontAwesome CDN) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

    <!-- Header -->
    <header>
        <div class="logo" onclick="showLanding()">
            <i class="fa-solid fa-bolt" style="color: var(--primary);"></i>
            Nano<span>Thumbnail</span>
        </div>
        <div style="display: flex; gap: 10px; align-items: center;">
            <select id="langSelect" class="btn btn-secondary" style="padding: 8px 12px; font-size: 0.9rem;">
                <option value="fr">üá´üá∑ FR</option>
                <option value="en">üá∫üá∏ EN</option>
            </select>
            <button id="historyBtn" class="btn btn-secondary hidden" onclick="toggleHistory()">
                <i class="fa-solid fa-clock-rotate-left"></i>
            </button>
            <button class="btn btn-secondary" onclick="openSettings()">
                <i class="fa-solid fa-gear"></i> <span data-i18n="header.api_btn">API</span>
            </button>
        </div>
    </header>

    <!-- View: Landing -->
    <div id="landing-view">
        
        <!-- Hero -->
        <div class="hero-section">
            <h1 class="hero-title" data-i18n="landing.hero_title">G√©n√©rez des miniatures<br>virales avec l'IA</h1>
            <p class="hero-subtitle" data-i18n="landing.hero_subtitle">Utilisez la puissance de <strong>Google Nano Banana Pro</strong> pour transformer vos id√©es en miniatures YouTube percutantes.</p>
            <button class="btn btn-primary" onclick="startApp()" style="padding: 16px 32px; font-size: 1.1rem;">
                <span data-i18n="landing.cta_start">Commencer maintenant</span> <i class="fa-solid fa-arrow-right"></i>
            </button>
            <p style="margin-top: 1.5rem; font-size: 0.9rem; color: var(--text-muted); opacity: 0.7;">
                <i class="fa-solid fa-check" style="color: var(--primary);"></i> <span data-i18n="landing.badge_free">Gratuit (Interface)</span> &nbsp;&nbsp;
                <i class="fa-solid fa-check" style="color: var(--primary);"></i> <span data-i18n="landing.badge_byok">BYOK (Replicate)</span>
            </p>
        </div>

        <!-- Features -->
        <div class="features-section">
            <h2 style="text-align: center; margin-bottom: 3rem; font-size: 2rem;" data-i18n="landing.features_title">Pourquoi choisir NanoThumbnail ?</h2>
            
            <div class="features-grid">
                <!-- Feature 1 -->
                <div class="glass-panel feature-card">
                    <div class="feature-icon" style="color: var(--primary);">
                        <i class="fa-solid fa-wand-magic-sparkles"></i>
                    </div>
                    <h3 style="margin-bottom: 1rem;" data-i18n="landing.feature_1_title">Nano Banana Pro</h3>
                    <p style="color: var(--text-muted); line-height: 1.6;" data-i18n="landing.feature_1_desc">
                        Nous utilisons le dernier mod√®le de Google, reconnu comme le <strong>meilleur g√©n√©rateur d'images</strong> du march√© actuel. Il excelle particuli√®rement dans le rendu de texte et le r√©alisme photo.
                    </p>
                </div>

                <!-- Feature 2 -->
                <div class="glass-panel feature-card">
                    <div class="feature-icon" style="color: var(--accent);">
                        <i class="fa-solid fa-wallet"></i>
                    </div>
                    <h3 style="margin-bottom: 1rem;" data-i18n="landing.feature_2_title">100% Gratuit</h3>
                    <p style="color: var(--text-muted); line-height: 1.6;" data-i18n="landing.feature_2_desc">
                        Notre outil est une interface gratuite et open-source. <strong>Aucun abonnement cach√©</strong>, aucune commission sur vos cr√©ations. Vous ne payez que ce que vous consommez.
                    </p>
                </div>

                <!-- Feature 3 -->
                <div class="glass-panel feature-card">
                    <div class="feature-icon" style="color: #34d399;">
                        <i class="fa-solid fa-key"></i>
                    </div>
                    <h3 style="margin-bottom: 1rem;" data-i18n="landing.feature_3_title">Bring Your Own Key</h3>
                    <p style="color: var(--text-muted); line-height: 1.6;" data-i18n="landing.feature_3_desc">
                        Connectez directement votre compte <strong>Replicate</strong>. C'est la garantie de payer le prix r√©el fournisseur et de garder le contr√¥le total sur vos donn√©es et votre API.
                    </p>
                </div>
            </div>
        </div>

        <!-- Section: Problem / Solution -->
        <div class="marketing-section alt">
            <div class="split-layout">
                <div class="split-content">
                    <div class="sidebar-title" style="margin-bottom: 1rem;" data-i18n="landing.problem_title">Le Probl√®me</div>
                    <h2 style="font-size: 2.5rem; margin-bottom: 1.5rem; line-height: 1.2;" data-i18n="landing.problem_main">Vos vid√©os m√©ritent mieux que 0 clic</h2>
                    <p style="color: var(--text-muted); margin-bottom: 1.5rem; line-height: 1.6;" data-i18n="landing.problem_desc_1">
                        Vous passez des heures sur le montage, mais tout se joue en 0.3 seconde. Si votre miniature n'accroche pas, personne ne regardera.
                    </p>
                    <p style="color: var(--text-muted); line-height: 1.6;" data-i18n="landing.problem_desc_2">
                    
                        <strong>NanoThumbnail change la donne.</strong>
                    </p>
                </div>
                <div class="split-visual">
                    <!-- Animated Chart SVG -->
                    <div class="chart-container">
                        <svg width="100%" height="100%" viewBox="0 0 200 100" preserveAspectRatio="none">
                            <!-- A crashing curve -->
                            <path class="chart-line" d="M0,10 Q50,10 80,40 T150,80 T200,90" />
                        </svg>
                        <!-- Axis labels (optional visual flair) -->
                        <div style="position: absolute; bottom: -25px; left: 0; color: var(--text-muted); font-size: 0.7rem;">Jours</div>
                        <div style="position: absolute; left: -30px; top: 0; color: var(--text-muted); font-size: 0.7rem;">Vues</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section: How it works -->
        <div class="marketing-section">
            <div class="section-header">
                <h2 data-i18n="landing.steps_title">3 √©tapes vers la viralit√©</h2>
                <p data-i18n="landing.steps_subtitle">Plus simple, √ßa n'existe pas. Nous avons supprim√© toute friction technique pour vous laisser cr√©er.</p>
            </div>
            
            <div class="steps-grid">
                <div class="step-card">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h3 style="margin-bottom: 1rem;" data-i18n="landing.step_1_title">L'Id√©e</h3>
                        <p style="color: var(--text-muted);" data-i18n="landing.step_1_desc">D√©crivez votre sc√®ne : "Un d√©veloppeur choqu√© devant son √©cran". Pas besoin de prompt complexe.</p>
                    </div>
                </div>
                <div class="step-card">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h3 style="margin-bottom: 1rem;" data-i18n="landing.step_2_title">L'IA</h3>
                        <p style="color: var(--text-muted);" data-i18n="landing.step_2_desc">Nano Banana Pro g√©n√®re votre miniature en haute d√©finition, en int√©grant parfaitement le texte demand√©.</p>
                    </div>
                </div>
                <div class="step-card">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h3 style="margin-bottom: 1rem;" data-i18n="landing.step_3_title">Le R√©sultat</h3>
                        <p style="color: var(--text-muted);" data-i18n="landing.step_3_desc">T√©l√©chargez votre miniature en PNG/JPG et uploadez-la directement sur YouTube.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section: FAQ -->
        <div class="marketing-section alt">
            <div class="section-header">
                <h2 data-i18n="landing.faq_title">Questions Fr√©quentes</h2>
            </div>
            <div class="faq-grid">
                <div class="glass-panel faq-item" style="padding: 1.5rem;">
                    <h3 data-i18n="landing.faq_1_q">Est-ce vraiment gratuit ?</h3>
                    <p data-i18n="landing.faq_1_a">L'interface NanoThumbnail est 100% gratuite. Cependant, la g√©n√©ration d'images utilise l'API Replicate qui est payante (environ 0.14$ par image). Vous payez directement Replicate.</p>
                </div>
                <div class="glass-panel faq-item" style="padding: 1.5rem;">
                    <h3 data-i18n="landing.faq_2_q">Ma cl√© API est-elle s√©curis√©e ?</h3>
                    <p data-i18n="landing.faq_2_a">Oui. Votre cl√© est stock√©e uniquement dans votre navigateur (LocalStorage). Elle n'est jamais envoy√©e sur nos serveurs (nous n'en avons pas !).</p>
                </div>
                <div class="glass-panel faq-item" style="padding: 1.5rem;">
                    <h3 data-i18n="landing.faq_3_q">Puis-je utiliser les images commercialement ?</h3>
                    <p data-i18n="landing.faq_3_a">Oui, les images g√©n√©r√©es par Nano Banana Pro via Replicate vous appartiennent g√©n√©ralement. V√©rifiez les CGU de Replicate pour les d√©tails.</p>
                </div>
                <div class="glass-panel faq-item" style="padding: 1.5rem;">
                    <h3 data-i18n="landing.faq_4_q">Pourquoi ce mod√®le est-il meilleur ?</h3>
                    <p data-i18n="landing.faq_4_a">Google Nano Banana Pro a √©t√© sp√©cifiquement entra√Æn√© pour comprendre des instructions complexes et g√©rer le texte, ce qui est le point faible de Midjourney ou DALL-E.</p>
                </div>
            </div>
        </div>

        <!-- Final CTA -->
        <div class="marketing-section" style="text-align: center;">
            <h2 style="font-size: 3rem; margin-bottom: 2rem;" data-i18n="landing.cta_final_title">Pr√™t √† exploser votre CTR ?</h2>
            <button class="btn btn-primary" onclick="startApp()" style="padding: 20px 40px; font-size: 1.2rem;">
                <span data-i18n="landing.cta_final_btn">Cr√©er ma premi√®re miniature</span> <i class="fa-solid fa-rocket" style="margin-left: 10px;"></i>
            </button>
        </div>

        <!-- Footer -->
        <footer style="text-align: center; padding: 2rem; color: var(--text-muted); font-size: 0.9rem; border-top: 1px solid var(--border);">
            <p data-i18n="landing.footer">YoanDev - NanoThumbnail ¬© 2025 ‚Ä¢ Propuls√© par Replicate & Google Nano Banana Pro</p>
        </footer>

    </div>

    <!-- View: App -->
    <div id="app-view" class="hidden">
        
        <!-- Sidebar Controls -->
        <aside class="sidebar">
            
            <div class="section">
                <div class="sidebar-title" data-i18n="app.sidebar_idea">1. Votre Id√©e (Prompt)</div>
                <textarea id="promptInput" class="input-field" rows="4" placeholder="D√©crivez votre miniature (ex: Visage choqu√©, fond explosion, texte 'INCROYABLE'...)" data-i18n="app.prompt_placeholder"></textarea>
            </div>

            <div class="section">
                <div class="sidebar-title" data-i18n="app.sidebar_ref">2. Image de R√©f√©rence (Optionnel)</div>
                <div class="drop-zone" id="dropZone">
                    <i class="fa-solid fa-cloud-arrow-up" style="font-size: 1.5rem; margin-bottom: 0.5rem; color: var(--text-muted);"></i>
                    <p style="font-size: 0.8rem; color: var(--text-muted);" data-i18n="app.drop_text">Cliquez ou glissez une image ici</p>
                    <input type="file" id="fileInput" accept="image/*" hidden>
                </div>
                <div id="previewContainer" class="preview-img-container">
                    <img id="previewImage" class="preview-img" src="" alt="Preview">
                    <button class="remove-img" onclick="clearImage()"><i class="fa-solid fa-times"></i></button>
                </div>
            </div>

            <div class="section">
                <div class="sidebar-title" data-i18n="app.sidebar_settings">3. Param√®tres</div>
                
                <div class="select-row">
                    <div class="input-group">
                        <label data-i18n="app.label_resolution">R√©solution</label>
                        <select id="resolutionSelect" class="input-field">
                            <option value="1K" data-i18n="app.opt_1k">1K (Rapide)</option>
                            <option value="2K" selected data-i18n="app.opt_2k">2K (Standard)</option>
                            <option value="4K" data-i18n="app.opt_4k">4K (Haut de gamme)</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label data-i18n="app.label_ratio">Format (Ratio)</label>
                        <select id="aspectRatioSelect" class="input-field">
                            <option value="16:9" selected data-i18n="app.opt_16_9">16:9 (Youtube)</option>
                            <option value="9:16" data-i18n="app.opt_9_16">9:16 (Shorts)</option>
                            <option value="4:3" data-i18n="app.opt_4_3">4:3</option>
                            <option value="1:1" data-i18n="app.opt_1_1">1:1 (Carr√©)</option>
                            <option value="match_input_image" data-i18n="app.opt_match">Match Input</option>
                        </select>
                    </div>
                </div>

                <div class="select-row">
                    <div class="input-group">
                        <label data-i18n="app.label_format">Format Fichier</label>
                        <select id="formatSelect" class="input-field">
                            <option value="png">PNG</option>
                            <option value="jpg">JPG</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label data-i18n="app.label_safety">S√©curit√©</label>
                        <select id="safetySelect" class="input-field">
                            <option value="block_medium_and_above" data-i18n="app.opt_medium">Moyen</option>
                            <option value="block_only_high" selected data-i18n="app.opt_permissive">Permissif</option>
                            <option value="block_low_and_above" data-i18n="app.opt_strict">Strict</option>
                        </select>
                    </div>
                </div>
            </div>

            <button class="btn btn-primary" id="generateBtn" onclick="generateImage()">
                <i class="fa-solid fa-wand-magic-sparkles"></i> <span data-i18n="app.btn_generate">G√©n√©rer Miniature</span>
            </button>

        </aside>

        <!-- Main Result Area -->
        <main class="main-area">
            <div class="result-container" id="resultContainer">
                <div class="result-placeholder" id="placeholder">
                    <i class="fa-solid fa-image" style="font-size: 3rem; opacity: 0.3;"></i>
                    <p data-i18n="app.placeholder_text">Votre cr√©ation appara√Ætra ici</p>
                </div>
                
                <div id="loader" class="hidden" style="text-align:center;">
                    <span class="loader"></span>
                    <p style="margin-top: 1rem; color: var(--accent);" data-i18n="app.status_working">L'IA travaille...</p>
                    <p id="statusText" style="font-size:0.8rem; color: var(--text-muted); white-space: pre-wrap; line-height: 1.5;" data-i18n="app.status_init">Initialisation...</p>
                </div>

                <img id="finalImage" class="generated-image hidden" src="" alt="Result">
            </div>
            
            <div id="actionsBar" class="hidden" style="margin-top: 1rem; display: flex; gap: 10px;">
                <a id="downloadLink" href="#" download="miniature.png" class="btn btn-primary">
                    <i class="fa-solid fa-download"></i> <span data-i18n="app.btn_download">T√©l√©charger</span>
                </a>
            </div>
        </main>

    </div>

    <!-- History Panel -->
    <div id="historyPanel" class="history-panel">
        <div style="display:flex; justify-content:space-between; margin-bottom:1.5rem;">
            <h3 style="font-weight:700;" data-i18n="history.title">Historique</h3>
            <button onclick="toggleHistory()" style="background:none; border:none; color:white; cursor:pointer;"><i class="fa-solid fa-times"></i></button>
        </div>
        <div id="historyList">
            <!-- Items injected via JS -->
            <p style="color: var(--text-muted); font-size: 0.9rem;" data-i18n="history.empty">Aucun historique r√©cent.</p>
        </div>
    </div>

    <!-- API Key Modal -->
    <div id="settingsModal" class="modal-overlay hidden">
        <div class="modal-content glass-panel">
            <h2 style="margin-bottom: 1rem;" data-i18n="modals.config_title">Configuration</h2>
            <div class="input-group">
                <label data-i18n="modals.label_api">Cl√© API Replicate</label>
                <input type="password" id="apiKeyInput" class="input-field" placeholder="r8_...">
                <small style="color: var(--text-muted); font-size: 0.8rem;" data-i18n="modals.help_api">Stock√©e localement dans votre navigateur.</small>
            </div>
            <div style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 1.5rem;">
                <button class="btn btn-secondary" onclick="closeSettings()" data-i18n="modals.btn_cancel">Annuler</button>
                <button class="btn btn-primary" onclick="saveSettings()" data-i18n="modals.btn_save">Sauvegarder</button>
            </div>
        </div>
    </div>

    <script type="module" src="/src/js/main.js"></script>
</body>
</html>